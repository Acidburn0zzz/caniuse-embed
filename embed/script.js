function getShortenedBrowserVersion(e){return e&&e.indexOf("-")>-1&&(e=e.split("-")[1]),e}function loadJSON(e,t,r){var s=new XMLHttpRequest;s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&(200===s.status?t&&t(JSON.parse(s.responseText)):r&&r(s))},s.open("GET",e,!0),s.send()}var caniuseDataUrl="https://raw.githubusercontent.com/Fyrd/caniuse/master/fulldata-json/data-2.0.json",featureID=location.href.split("?feat=")[1],featureID=featureID?featureID.split("&periods=")[0]:null,periods=location.href.split("&periods=")[1],periods=periods?periods.split(","):null,browsers=["ie","edge","firefox","chrome","safari","opera","ios_saf","op_mini","android","and_chr"];document.getElementById("defaultMessage").innerHTML=featureID&&periods?'<a href="http://caniuse.com/#feat='+featureID+'">Can I Use '+featureID+"?</a> Data on support for the "+featureID+" feature across the major browsers from caniuse.com. (Embed Loading)":"Error: Feature and/or Periods not Specified";for(var i=periods.length-1;i>-1;i--){var tableCells='<td class="ie"></td><td class="edge"></td><td class="firefox"></td><td class="chrome"></td><td class="safari"></td><td class="opera"></td><td class="ios_saf"></td><td class="op_mini"></td><td class="android"></td><td class="and_chr"></td>',row=document.createElement("tr");row.className="statistics "+periods[i],row.innerHTML=tableCells,document.getElementById("tableBody").appendChild(row)}loadJSON(caniuseDataUrl,function(e){var t=e.data[featureID];if(t){var r=t.usage_perc_y,s=t.usage_perc_a,a=r+s,a=a.toFixed(2),o=t.description;o=o.replace(/</g,"&lt;"),o=o.replace(/>/g,"&gt;"),document.getElementById("featureTitle").innerHTML=t.title,document.getElementById("featureDescription").innerHTML=o,document.getElementById("featureLink").href="http://caniuse.com/#feat="+featureID,document.getElementById("note").innerHTML='Global: <span class="y">'+r+'%</span> + <span class="a">'+s+"%</span> = "+a+"%";for(var i={},d=0;d<browsers.length;d++){for(var l,c=browsers[d],u=e.agents[c].current_version,f=0;f<e.agents[c].version_list.length;f++)if(0===e.agents[c].version_list[f].era){l=f;break}l=parseInt(l),i[c]={};for(var f=0;f<periods.length;f++){var p=periods[f];"current"===p?i[c][p]=u:p.indexOf("past")>-1?(n=parseInt(p.split("_")[1]),i[c][p]=e.agents[c].version_list[l-n]?e.agents[c].version_list[l-n].version:null):p.indexOf("future")>-1&&(n=parseInt(p.split("_")[1]),i[c][p]=e.agents[c].version_list[l+n]?e.agents[c].version_list[l+n].version:null)}}for(var g={},d=0;d<browsers.length;d++){var c=browsers[d];g[c]={};for(var f=0;f<periods.length;f++){var p=periods[f],m=i[c][p],h=e.agents[c].usage_global[m],h=h?h.toFixed(2):0;g[c][p]=h}}for(var v={},d=0;d<browsers.length;d++){var c=browsers[d];v[c]={};for(var f=0;f<periods.length;f++){var p=periods[f];v[c][p]=t.stats[c][i[c][p]]}}for(var b=!1,y=!1,d=0;d<browsers.length;d++)for(var c=browsers[d],f=0;f<periods.length;f++){for(var I,p=periods[f],w=document.getElementsByClassName(p)[0],E=w.childNodes,_=0;_<E.length;_++)E[_].className.indexOf(c)>-1&&(I=E[_]);void 0!=v[c][p]&&(I.className+=" "+v[c][p]);var M=getShortenedBrowserVersion(i[c][p]),B="<span>"+M+'</span><span class="usage">'+g[c][p]+"%</span>";void 0!=i[c][p]?I.innerHTML=B:I.innerHTML="<span></span>",void 0!=v[c][p]&&v[c][p].indexOf("x")>-1&&(b=!0),void 0!=v[c][p]&&v[c][p].indexOf("u")>-1&&(y=!0)}document.getElementById("legendX").style.display=b?"inline-block":"none",document.getElementById("legendU").style.display=y?"inline-block":"none"}else document.getElementById("featureTitle").innerHTML="Uh Oh!",document.getElementById("featureDescription").innerHTML="The feature <strong>'"+featureID+"'</strong> was not recognized. ",document.getElementById("featureMain").innerHTML="";document.getElementById("defaultMessage").style.display="none",document.getElementsByClassName("feature")[0].style.display="block";var L=document.getElementsByClassName("feature")[0].scrollHeight,D="ciu_embed:"+featureID+":"+L;parent.postMessage(D,"*"),window.onresize=function(e){L=document.getElementsByClassName("feature")[0].scrollHeight;var t="ciu_embed:"+featureID+":"+L;parent.postMessage(t,"*")}},function(e){document.getElementById("defaultMessage").innerHTML="Error Getting JSON File: "+e.response,console.error(e)});