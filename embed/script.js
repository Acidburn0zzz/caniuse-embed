function getShortenedBrowserVersion(e){return e&&e.indexOf("-")>-1&&(e=e.split("-")[1]),e}function loadJSON(e,t,s){var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&(200===n.status?t&&t(JSON.parse(n.responseText)):s&&s(n))},n.open("GET",e,!0),n.send()}for(var caniuseDataUrl="https://raw.githubusercontent.com/Fyrd/caniuse/master/fulldata-json/data-2.0.json",featureID=location.href.split("?feat=")[1],featureID=featureID.split("&periods=")[0],periods=location.href.split("&periods=")[1],periods=periods.split(","),browsers=["ie","edge","firefox","chrome","safari","opera","ios_saf","op_mini","android","and_chr"],i=periods.length-1;i>-1;i--){var tableCells='<td class="ie"></td><td class="edge"></td><td class="firefox"></td><td class="chrome"></td><td class="safari"></td><td class="opera"></td><td class="ios_saf"></td><td class="op_mini"></td><td class="android"></td><td class="and_chr"></td>',row=document.createElement("tr");row.className="statistics "+periods[i],row.innerHTML=tableCells,document.getElementById("tableBody").appendChild(row)}document.getElementById("defaultMessage").innerHTML='<a href="http://caniuse.com/#feat='+featureID+'">Can I Use '+featureID+"?</a> Data on support for the "+featureID+" feature across the major browsers from caniuse.com. (Embed Loading)",loadJSON(caniuseDataUrl,function(e){var t=e.data[featureID];if(t){var s=t.usage_perc_y,r=t.usage_perc_a,a=s+r,a=a.toFixed(2);document.getElementById("featureTitle").innerHTML=t.title,document.getElementById("featureDescription").innerHTML=t.description,document.getElementById("featureLink").href="http://caniuse.com/#feat="+featureID,document.getElementById("note").innerHTML='Global: <span class="y">'+s+'%</span> + <span class="a">'+r+"%</span> = "+a+"%";for(var o={},i=0;i<browsers.length;i++){for(var d,l=browsers[i],c=e.agents[l].current_version,u=0;u<e.agents[l].version_list.length;u++)if(0===e.agents[l].version_list[u].era){d=u;break}d=parseInt(d),o[l]={};for(var u=0;u<periods.length;u++){var f=periods[u];"current"===f?o[l][f]=c:f.indexOf("past")>-1?(n=parseInt(f.split("_")[1]),o[l][f]=e.agents[l].version_list[d-n]?e.agents[l].version_list[d-n].version:null):f.indexOf("future")>-1&&(n=parseInt(f.split("_")[1]),o[l][f]=e.agents[l].version_list[d+n]?e.agents[l].version_list[d+n].version:null)}}for(var p={},i=0;i<browsers.length;i++){var l=browsers[i];p[l]={};for(var u=0;u<periods.length;u++){var f=periods[u],g=o[l][f],m=e.agents[l].usage_global[g],m=m?m.toFixed(2):0;p[l][f]=m}}for(var y={},i=0;i<browsers.length;i++){var l=browsers[i];y[l]={};for(var u=0;u<periods.length;u++){var f=periods[u];y[l][f]=t.stats[l][o[l][f]]}}for(var v=!1,h=!1,i=0;i<browsers.length;i++)for(var l=browsers[i],u=0;u<periods.length;u++){for(var I,f=periods[u],E=document.getElementsByClassName(f)[0],b=E.childNodes,B=0;B<b.length;B++)b[B].className.indexOf(l)>-1&&(I=b[B]);void 0!=y[l][f]?I.className+=" "+y[l][f]:!1;var _=getShortenedBrowserVersion(o[l][f]),w="<span>"+_+'</span><span class="usage">'+p[l][f]+"%</span>";void 0!=o[l][f]?I.innerHTML=w:I.innerHTML="<span></span>",void 0!=y[l][f]&&y[l][f].indexOf("x")>-1&&(v=!0),void 0!=y[l][f]&&y[l][f].indexOf("u")>-1&&(h=!0)}v?document.getElementById("legendX").style.display="inline-block":document.getElementById("legendX").style.display="none",h?document.getElementById("legendU").style.display="inline-block":document.getElementById("legendU").style.display="none"}else document.getElementById("featureTitle").innerHTML="Uh Oh!",document.getElementById("featureDescription").innerHTML="The feature <strong>'"+featureID+"'</strong> was not recognized. ",document.getElementById("featureMain").innerHTML="";document.getElementById("defaultMessage").style.display="none",document.getElementsByClassName("feature")[0].style.display="block";var M=document.getElementsByClassName("feature")[0].scrollHeight,D="ciu_embed:"+featureID+":"+M;parent.postMessage(D,"*"),window.onresize=function(e){M=document.getElementsByClassName("feature")[0].scrollHeight;var t="ciu_embed:"+featureID+":"+M;parent.postMessage(t,"*")}},function(e){document.getElementById("defaultMessage").innerHTML="Error Getting JSON File: "+e.response,console.error(e)});