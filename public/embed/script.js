function parseQueryParams(){var e=window.location.search.split("?")[1].split("&"),t={};return e.forEach(function(e){var s=e.split("=")[0],n=e.split("=")[1];switch(s){case"feat":t.featureID=n;break;case"periods":t.periods=n.split(",");break;case"accessible-colours":t.accessibleColours="true"==n;break;case"image-base":"none"!==n&&(t.imageBase=n);break;case"screenshot":t.screenshot="true"==n}}),t}function setDefaultLoadingMessage(){var e;e=options.featureID?options.imageBase?'<picture><source type="image/webp" srcset="'+options.imageBase+'.webp"><source type="image/png" srcset="'+options.imageBase+'.png"><source type="image/jpeg" srcset="'+options.imageBase+'.jpg"><img src="'+options.imageBase+'.png" alt="Data on support for the '+options.featureID+' feature across the major browsers from caniuse.com"></picture>':'<a href="http://caniuse.com/#feat='+options.featureID+'">Can I Use '+options.featureID+"?</a> Data on support for the "+options.featureID+" feature across the major browsers from caniuse.com. (Embed Loading)":"Error: Feature not specified",document.getElementById("defaultMessage").innerHTML=e}function getShortenedBrowserVersion(e){return e&&e.indexOf("-")>-1&&(e=e.split("-")[1]),e}function fetchCanIUseData(e,t){var s=new XMLHttpRequest;s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&(200===s.status?e&&e(JSON.parse(s.responseText)):t&&t(s))},s.open("GET",caniuseDataUrl,!0),s.send()}var options,caniuseDataUrl="https://raw.githubusercontent.com/Fyrd/caniuse/master/fulldata-json/data-2.0.json",browsers=["ie","edge","firefox","chrome","safari","ios_saf","op_mini","and_chr","android","samsung"];!function(){options=parseQueryParams(),options.periods||(options.periods=["future_1","current","past_1","past_2"]),setDefaultLoadingMessage();for(var e=options.periods.length-1;e>-1;e--){for(var t="",s=0;s<browsers.length;s++)t+='<td class="'+browsers[s]+'"></td>';var a=document.createElement("tr");a.className="statistics "+options.periods[e],a.innerHTML=t,document.getElementById("tableBody").appendChild(a)}if(fetchCanIUseData(function(e){var t=e.data[options.featureID];if(t){var s=t.usage_perc_y,a=t.usage_perc_a,r=s+a,r=r.toFixed(2),o=t.description;o=o.replace(/</g,"&lt;"),o=o.replace(/>/g,"&gt;"),document.getElementById("featureTitle").innerHTML=t.title,document.getElementById("featureDescription").innerHTML=o,document.getElementById("featureLink").href="http://caniuse.com/#feat="+options.featureID,document.getElementById("note").innerHTML='Global: <span class="y">'+s+'%</span> + <span class="a">'+a+"%</span> = "+r+"%";for(var i={},d=0;d<browsers.length;d++){for(var c,l=browsers[d],u=e.agents[l].current_version,p=0;p<e.agents[l].version_list.length;p++)if(0===e.agents[l].version_list[p].era){c=p;break}c=parseInt(c),i[l]={};for(var p=0;p<options.periods.length;p++){var g=options.periods[p];"current"===g?i[l][g]=u:g.indexOf("past")>-1?(n=parseInt(g.split("_")[1]),i[l][g]=e.agents[l].version_list[c-n]?e.agents[l].version_list[c-n].version:null):g.indexOf("future")>-1&&(n=parseInt(g.split("_")[1]),i[l][g]=e.agents[l].version_list[c+n]?e.agents[l].version_list[c+n].version:null)}}for(var m={},d=0;d<browsers.length;d++){var l=browsers[d];m[l]={};for(var p=0;p<options.periods.length;p++){var g=options.periods[p],f=i[l][g],h=e.agents[l].usage_global[f],h=h?h.toFixed(2):0;m[l][g]=h}}for(var b={},d=0;d<browsers.length;d++){var l=browsers[d];b[l]={};for(var p=0;p<options.periods.length;p++){var g=options.periods[p];b[l][g]=t.stats[l][i[l][g]]}}for(var v=!1,y=!1,E=!1,d=0;d<browsers.length;d++)for(var l=browsers[d],p=0;p<options.periods.length;p++){for(var I,g=options.periods[p],B=document.getElementsByClassName(g)[0],w=B.childNodes,M=0;M<w.length;M++)w[M].className.indexOf(l)>-1&&(I=w[M]);void 0!=b[l][g]&&(I.className+=" "+b[l][g]);var L=getShortenedBrowserVersion(i[l][g]),D="<span>"+L+'</span><span class="usage">'+m[l][g]+"%</span>";void 0!=i[l][g]?I.innerHTML=D:I.innerHTML="<span></span>",void 0!=b[l][g]&&b[l][g].indexOf("x")>-1&&(v=!0),void 0!=b[l][g]&&b[l][g].indexOf("u")>-1&&(y=!0),void 0!=b[l][g]&&b[l][g].indexOf("d")>-1&&(E=!0)}document.getElementById("legendX").style.display=v?"inline-block":"none",document.getElementById("legendU").style.display=y?"inline-block":"none",document.getElementById("legendD").style.display=E?"inline-block":"none"}else document.getElementById("featureTitle").innerHTML="Uh Oh!",document.getElementById("featureDescription").innerHTML="The feature <strong>'"+options.featureID+"'</strong> was not recognized. ",document.getElementById("featureMain").innerHTML="";document.getElementById("defaultMessage").style.display="none",document.getElementsByClassName("feature")[0].style.display="block";var _=document.getElementsByClassName("feature")[0].scrollHeight,T="ciu_embed:"+options.featureID+":"+_;parent.postMessage(T,"*"),window.onresize=function(e){_=document.getElementsByClassName("feature")[0].scrollHeight;var t="ciu_embed:"+options.featureID+":"+_;parent.postMessage(t,"*")}},function(e){document.getElementById("defaultMessage").innerHTML="Error Getting JSON File: "+e.response,console.error(e)}),options.accessibleColours&&document.body.classList.add("accessible-colours"),options.screenshot||document.getElementById("accessibleColoursToggle").addEventListener("click",function(){document.body.classList.toggle("accessible-colours")}),options.screenshot){var r=new Date,o=["January","February","March","April","May","June","July","August","September","October","November","December"];document.getElementById("footer-right").innerHTML=r.getDate()+" "+o[r.getMonth()]+" "+r.getFullYear(),document.getElementById("footer-left").innerHTML="Data from caniuse.com | Embed from caniuse.bitsofco.de",document.querySelector(".icon-external-link").setAttribute("hidden","true")}}();