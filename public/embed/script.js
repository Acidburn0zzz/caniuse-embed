function parseQueryParams(){var e=window.location.search.split("?")[1].split("&"),t={};return e.forEach(function(e){var a=e.split("=")[0],n=e.split("=")[1];switch(a){case"feat":t.featureID=n;break;case"periods":t.periods=n.split(",");break;case"accessible-colours":t.accessibleColours="true"===n;break;case"image-base":"none"!==n&&(t.imageBase=n);break;case"screenshot":t.screenshot="true"===n}}),t.periods||(t.periods=["future_1","current","past_1","past_2"]),t}function setDefaultLoadingMessage(){var e;e=OPTIONS.featureID?OPTIONS.imageBase?'<picture><source type="image/webp" srcset="'+OPTIONS.imageBase+'.webp"><source type="image/png" srcset="'+OPTIONS.imageBase+'.png"><source type="image/jpeg" srcset="'+OPTIONS.imageBase+'.jpg"><img src="'+OPTIONS.imageBase+'.png" alt="Data on support for the '+OPTIONS.featureID+' feature across the major browsers from caniuse.com"></picture>':'<a href="http://caniuse.com/#feat='+OPTIONS.featureID+'">Can I Use '+OPTIONS.featureID+"?</a> Data on support for the "+OPTIONS.featureID+" feature across the major browsers from caniuse.com. (Embed Loading)":"Error: Feature not specified",document.getElementById("defaultMessage").innerHTML=e}function getShortenedBrowserVersion(e){return e&&e.indexOf("-")>-1&&(e=e.split("-")[1]),e}function makeRequest(e){return new Promise(function(t,a){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){200==n.status?t(JSON.parse(n.response)):a(Error(n.statusText))},n.onerror=function(){a(Error("Network Error"))},n.send()})}function getFeature(){var e=0===OPTIONS.featureID.indexOf("mdn-")?"mdn":"caniuse";if("mdn"===e){var t=OPTIONS.featureID.split("mdn-")[1];t=t.split("__");return makeRequest("https://raw.githubusercontent.com/mdn/browser-compat-data/master/"+t.join("/")+".json").then(function(a){var n=a[t[0]];n.__compat||(n=a[t[0]][t[1]]),n.__compat||(n=a[t[0]][t[1]][t[2]]),n.__compat||(n=a[t[0]][t[1]][t[2]]),n.__compat||(n=a[t[0]][t[1]][t[2]][t[3]]),n.__compat||(n=a[t[0]][t[1]][t[2]][t[3]][t[4]]),n=n.__compat,FEATURE=Object.assign({dataSource:e,title:t.join(" "),url:n.mdn_url},n)}).then(function(){return makeRequest(caniuseDataUrl).then(function(e){return parseBrowserData(e.agents)})})}return makeRequest(caniuseDataUrl).then(function(t){FEATURE=Object.assign({dataSource:e,url:"http://caniuse.com/#feat="+OPTIONS.featureID},t.data[OPTIONS.featureID]),parseBrowserData(t.agents)})}function parseBrowserData(e){for(var t={},a=0;a<BROWSERS.length;a++){for(var r,s=BROWSERS[a],o=e[s].current_version,i=0;i<e[s].version_list.length;i++)if(0===e[s].version_list[i].era){r=i;break}r=parseInt(r),t[s]={};for(var i=0;i<OPTIONS.periods.length;i++){var c=OPTIONS.periods[i];"current"===c?t[s][c]=o:c.indexOf("past")>-1?(n=parseInt(c.split("_")[1]),t[s][c]=e[s].version_list[r-n]?e[s].version_list[r-n].version:null):c.indexOf("future")>-1&&(n=parseInt(c.split("_")[1]),t[s][c]=e[s].version_list[r+n]?e[s].version_list[r+n].version:null)}}for(var u={},a=0;a<BROWSERS.length;a++){var s=BROWSERS[a];u[s]={};for(var i=0;i<OPTIONS.periods.length;i++){var c=OPTIONS.periods[i],d=t[s][c],l=e[s].usage_global[d];l=l?l.toFixed(2):0,u[s][c]=l}}BROWSER_DATA={versions:t,usage:u}}function parseSupportData(){function e(e,t){a[e][t]=FEATURE.stats[e][BROWSER_DATA.versions[e][t]]}function t(e,t){if(BROWSER_DATA.versions[e][t]){var n=FEATURE.support[MDN_BROWSERS_KEY[e]];if(!n)return void(a[e][t]="u");const r=n.version_added,s=BROWSER_DATA.versions[e][t],o=parseFloat(s)>=parseFloat(r);a[e][t]=o?"y":"n"}}for(var a={},n=0;n<BROWSERS.length;n++){var r=BROWSERS[n];a[r]={};for(var s=0;s<OPTIONS.periods.length;s++){var o=OPTIONS.periods[s];switch(FEATURE.dataSource){case"mdn":t(r,o);break;case"caniuse":e(r,o)}}}return a}function displayInformation(){if(document.getElementById("featureTitle").innerHTML=FEATURE.title,document.getElementById("featureLink").href=FEATURE.url,FEATURE.description){var e=FEATURE.description;e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),document.getElementById("featureDescription").innerHTML=e}if(FEATURE.usage_perc_y){var t=FEATURE.usage_perc_y,a=FEATURE.usage_perc_a,n=t+a,n=n.toFixed(2);document.getElementById("note").innerHTML='Global: <span class="y">'+t+'%</span> + <span class="a">'+a+"%</span> = "+n+"%"}}function displayTable(e){for(var t=OPTIONS.periods.length-1;t>-1;t--){for(var a="",n=0;n<BROWSERS.length;n++)a+='<td class="'+BROWSERS[n]+'"></td>';var r=document.createElement("tr");r.className="statistics "+OPTIONS.periods[t],r.innerHTML=a,document.getElementById("tableBody").appendChild(r)}for(var s=!1,o=!1,i=!1,t=0;t<BROWSERS.length;t++)for(var c=BROWSERS[t],u=0;u<OPTIONS.periods.length;u++){for(var d,l=OPTIONS.periods[u],r=document.getElementsByClassName(l)[0],f=r.childNodes,m=0;m<f.length;m++)f[m].className.indexOf(c)>-1&&(d=f[m]);void 0!=e[c][l]&&(d.className+=" "+e[c][l]);var p=getShortenedBrowserVersion(BROWSER_DATA.versions[c][l]),g="<span>"+p+'</span><span class="usage">'+BROWSER_DATA.usage[c][l]+"%</span>";void 0!=BROWSER_DATA.versions[c][l]?d.innerHTML=g:d.innerHTML="<span></span>",void 0!=e[c][l]&&e[c][l].indexOf("x")>-1&&(s=!0),void 0!=e[c][l]&&e[c][l].indexOf("u")>-1&&(o=!0),void 0!=e[c][l]&&e[c][l].indexOf("d")>-1&&(i=!0)}document.getElementById("legendX").style.display=s?"inline-block":"none",document.getElementById("legendU").style.display=o?"inline-block":"none",document.getElementById("legendD").style.display=i?"inline-block":"none"}var OPTIONS,BROWSERS=["ie","edge","firefox","chrome","safari","ios_saf","op_mini","and_chr","android","samsung"],BROWSER_DATA,FEATURE,caniuseDataUrl="https://raw.githubusercontent.com/Fyrd/caniuse/master/fulldata-json/data-2.0.json",MDN_BROWSERS_KEY={ie:"ie",edge:"edge",firefox:"firefox",chrome:"chrome",safari:"safari",ios_saf:"safari_ios",op_mini:"op_mini",and_chr:"chrome_android",android:"android",samsung:"samsunginternet_android"};!function(){OPTIONS=parseQueryParams(),setDefaultLoadingMessage(),getFeature().then(function(){if(!BROWSER_DATA)return getBrowserData()}).then(function(){return parseSupportData()}).then(function(e){displayInformation(),displayTable(e)}).then(function(){document.getElementById("defaultMessage").style.display="none",document.getElementsByClassName("feature")[0].style.display="block";var e=document.getElementsByClassName("feature")[0].scrollHeight,t="ciu_embed:"+OPTIONS.featureID+":"+e;parent.postMessage(t,"*"),window.onresize=function(t){e=document.getElementsByClassName("feature")[0].scrollHeight;var a="ciu_embed:"+OPTIONS.featureID+":"+e;parent.postMessage(a,"*")}}).then(function(){if(OPTIONS.accessibleColours&&document.body.classList.add("accessible-colours"),OPTIONS.screenshot||document.getElementById("accessibleColoursToggle").addEventListener("click",function(){document.body.classList.toggle("accessible-colours")}),OPTIONS.screenshot){document.body.classList.add("screenshot");var e=new Date,t=["January","February","March","April","May","June","July","August","September","October","November","December"];document.getElementById("footer-right").innerHTML=e.getDate()+" "+t[e.getMonth()]+" "+e.getFullYear(),document.querySelector(".icon-external-link").setAttribute("hidden","true")}switch(FEATURE.dataSource){case"mdn":document.getElementById("footer-left").innerHTML='Data from <a href="https://github.com/mdn/browser-compat-data">mozilla.org</a> | Embed from <a href="https://caniuse.bitsofco.de">caniuse.bitsofco.de</a>';break;case"caniuse":document.getElementById("footer-left").innerHTML='Data from <a href="https://caniuse.com">caniuse.com</a> | Embed from <a href="https://caniuse.bitsofco.de">caniuse.bitsofco.de</a>'}}).catch(function(e){document.getElementById("defaultMessage").innerHTML="Feature not found...",console.error(e)})}();