function parseQueryParams(){var e=window.location.search.split("?")[1].split("&"),t={};return e.forEach(function(e){var s=e.split("=")[0],n=e.split("=")[1];switch(s){case"feat":t.featureID=n;break;case"periods":t.periods=n.split(",");break;case"accessible-colours":t.accessibleColours="true"==n;break;case"image-base":"none"!==n&&(t.imageBase=n);break;case"screenshot":t.screenshot="true"==n}}),t}function setDefaultLoadingMessage(){var e;e=options.featureID?options.imageBase?'<picture><source type="image/webp" srcset="'+options.imageBase+'.webp"><source type="image/png" srcset="'+options.imageBase+'.png"><source type="image/jpeg" srcset="'+options.imageBase+'.jpg"><img src="'+options.imageBase+'.png" alt="Data on support for the '+options.featureID+' feature across the major browsers from caniuse.com"></picture>':'<a href="http://caniuse.com/#feat='+options.featureID+'">Can I Use '+options.featureID+"?</a> Data on support for the "+options.featureID+" feature across the major browsers from caniuse.com. (Embed Loading)":"Error: Feature not specified",document.getElementById("defaultMessage").innerHTML=e}function getShortenedBrowserVersion(e){return e&&e.indexOf("-")>-1&&(e=e.split("-")[1]),e}function fetchCanIUseData(e,t){var s=new XMLHttpRequest;s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&(200===s.status?e&&e(JSON.parse(s.responseText)):t&&t(s))},s.open("GET",caniuseDataUrl,!0),s.send()}var options,caniuseDataUrl="https://raw.githubusercontent.com/Fyrd/caniuse/master/fulldata-json/data-2.0.json",browsers=["ie","edge","firefox","chrome","safari","ios_saf","op_mini","and_chr","android","samsung"];!function(){options=parseQueryParams(),options.periods||(options.periods=["future_1","current","past_1","past_2"]),setDefaultLoadingMessage();for(var e=options.periods.length-1;e>-1;e--){for(var t="",s=0;s<browsers.length;s++)t+='<td class="'+browsers[s]+'"></td>';var o=document.createElement("tr");o.className="statistics "+options.periods[e],o.innerHTML=t,document.getElementById("tableBody").appendChild(o)}if(fetchCanIUseData(function(e){var t=e.data[options.featureID];if(t){var s=t.usage_perc_y,o=t.usage_perc_a,a=s+o,a=a.toFixed(2),r=t.description;r=r.replace(/</g,"&lt;"),r=r.replace(/>/g,"&gt;"),document.getElementById("featureTitle").innerHTML=t.title,document.getElementById("featureDescription").innerHTML=r,document.getElementById("featureLink").href="http://caniuse.com/#feat="+options.featureID,document.getElementById("note").innerHTML='Global: <span class="y">'+s+'%</span> + <span class="a">'+o+"%</span> = "+a+"%";for(var i={},c=0;c<browsers.length;c++){for(var d,l=browsers[c],u=e.agents[l].current_version,p=0;p<e.agents[l].version_list.length;p++)if(0===e.agents[l].version_list[p].era){d=p;break}d=parseInt(d),i[l]={};for(var p=0;p<options.periods.length;p++){var g=options.periods[p];"current"===g?i[l][g]=u:g.indexOf("past")>-1?(n=parseInt(g.split("_")[1]),i[l][g]=e.agents[l].version_list[d-n]?e.agents[l].version_list[d-n].version:null):g.indexOf("future")>-1&&(n=parseInt(g.split("_")[1]),i[l][g]=e.agents[l].version_list[d+n]?e.agents[l].version_list[d+n].version:null)}}for(var f={},c=0;c<browsers.length;c++){var l=browsers[c];f[l]={};for(var p=0;p<options.periods.length;p++){var g=options.periods[p],m=i[l][g],b=e.agents[l].usage_global[m],b=b?b.toFixed(2):0;f[l][g]=b}}for(var h={},c=0;c<browsers.length;c++){var l=browsers[c];h[l]={};for(var p=0;p<options.periods.length;p++){var g=options.periods[p];h[l][g]=t.stats[l][i[l][g]]}}for(var v=!1,y=!1,E=!1,c=0;c<browsers.length;c++)for(var l=browsers[c],p=0;p<options.periods.length;p++){for(var I,g=options.periods[p],w=document.getElementsByClassName(g)[0],B=w.childNodes,L=0;L<B.length;L++)B[L].className.indexOf(l)>-1&&(I=B[L]);void 0!=h[l][g]&&(I.className+=" "+h[l][g]);var M=getShortenedBrowserVersion(i[l][g]),D="<span>"+M+'</span><span class="usage">'+f[l][g]+"%</span>";void 0!=i[l][g]?I.innerHTML=D:I.innerHTML="<span></span>",void 0!=h[l][g]&&h[l][g].indexOf("x")>-1&&(v=!0),void 0!=h[l][g]&&h[l][g].indexOf("u")>-1&&(y=!0),void 0!=h[l][g]&&h[l][g].indexOf("d")>-1&&(E=!0)}document.getElementById("legendX").style.display=v?"inline-block":"none",document.getElementById("legendU").style.display=y?"inline-block":"none",document.getElementById("legendD").style.display=E?"inline-block":"none"}else document.getElementById("featureTitle").innerHTML="Uh Oh!",document.getElementById("featureDescription").innerHTML="The feature <strong>'"+options.featureID+"'</strong> was not recognized. ",document.getElementById("featureMain").innerHTML="";document.getElementById("defaultMessage").style.display="none",document.getElementsByClassName("feature")[0].style.display="block";var _=document.getElementsByClassName("feature")[0].scrollHeight,T="ciu_embed:"+options.featureID+":"+_;parent.postMessage(T,"*"),window.onresize=function(e){_=document.getElementsByClassName("feature")[0].scrollHeight;var t="ciu_embed:"+options.featureID+":"+_;parent.postMessage(t,"*")}},function(e){document.getElementById("defaultMessage").innerHTML="Error Getting JSON File: "+e.response,console.error(e)}),options.accessibleColours&&document.body.classList.add("accessible-colours"),options.screenshot||document.getElementById("accessibleColoursToggle").addEventListener("click",function(){document.body.classList.toggle("accessible-colours")}),options.screenshot){document.body.classList.add("screenshot");var a=new Date,r=["January","February","March","April","May","June","July","August","September","October","November","December"];document.getElementById("footer-right").innerHTML=a.getDate()+" "+r[a.getMonth()]+" "+a.getFullYear(),document.getElementById("footer-left").innerHTML="Data from caniuse.com | Embed from caniuse.bitsofco.de",document.querySelector(".icon-external-link").setAttribute("hidden","true")}}();