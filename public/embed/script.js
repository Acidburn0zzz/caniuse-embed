function setGlobalOptions(){var e=window.location.search.split("?")[1].split("&"),t={};e.forEach(function(e){var a=e.split("=")[0],n=e.split("=")[1];switch(a){case"feat":t.featureID=n,t.dataSource=0===t.featureID.indexOf("mdn-")?"mdn":"caniuse";break;case"periods":t.periods=n.split(",");break;case"accessible-colours":t.accessibleColours="true"===n;break;case"image-base":"none"!==n&&(t.imageBase=n);break;case"screenshot":t.screenshot="true"===n}}),t.periods||(t.periods=["future_1","current","past_1","past_2"]),OPTIONS=t}function getShortenedBrowserVersion(e){return e&&e.indexOf("-")>-1&&(e=e.split("-")[1]),e}function get(e){return new Promise(function(t,a){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){200===n.status?t(JSON.parse(n.response)):a(Error(n.statusText))},n.onerror=function(){a(Error("Network Error"))},n.send()})}function post(e,t){return new Promise(function(a,n){var r=new XMLHttpRequest;r.open("POST",e,!0),r.setRequestHeader("Content-type","application/json; charset=utf-8"),r.onload=function(){200===r.status?a(JSON.parse(r.response)):n(Error(r.statusText))},r.onerror=function(){n(Error("Network Error"))},r.send(JSON.stringify(t))})}function getFeature(){switch(OPTIONS.dataSource){case"mdn":var e=OPTIONS.featureID.split("mdn-")[1];e=e.split("__");var t="";return post(embedAPI+"/format-mdn-feature-title",{feature:OPTIONS.featureID}).then(function(a){return t=a.title,get(mdnDataUrlBse+e.join("/")+".json")}).then(function(a){var n=a[e[0]];n.__compat||(n=a[e[0]][e[1]]),n.__compat||(n=a[e[0]][e[1]][e[2]]),n.__compat||(n=a[e[0]][e[1]][e[2]]),n.__compat||(n=a[e[0]][e[1]][e[2]][e[3]]),n.__compat||(n=a[e[0]][e[1]][e[2]][e[3]][e[4]]),n=n.__compat,FEATURE=Object.assign({title:t,url:n.mdn_url},n)}).then(function(){return getBrowserData()});case"caniuse":return get(caniuseDataUrl).then(function(e){return FEATURE=Object.assign({url:"https://caniuse.com/#feat="+OPTIONS.featureID},e.data[OPTIONS.featureID]),getBrowserData(e.agents)})}}function getBrowserData(e){return Promise.resolve().then(function(){return e||get(caniuseDataUrl).then(function(e){return e.agents})}).then(function(e){return parseBrowserData(e)})}function parseBrowserData(e){for(var t={},a=0;a<BROWSERS.length;a++){for(var r,s=BROWSERS[a],o=e[s].current_version,i=0;i<e[s].version_list.length;i++)if(0===e[s].version_list[i].era){r=i;break}r=parseInt(r),t[s]={};for(var i=0;i<OPTIONS.periods.length;i++){var c=OPTIONS.periods[i];"current"===c?t[s][c]=o:c.indexOf("past")>-1?(n=parseInt(c.split("_")[1]),t[s][c]=e[s].version_list[r-n]?e[s].version_list[r-n].version:null):c.indexOf("future")>-1&&(n=parseInt(c.split("_")[1]),t[s][c]=e[s].version_list[r+n]?e[s].version_list[r+n].version:null)}}for(var u={},a=0;a<BROWSERS.length;a++){var s=BROWSERS[a];u[s]={};for(var i=0;i<OPTIONS.periods.length;i++){var c=OPTIONS.periods[i],d=t[s][c],l=e[s].usage_global[d];l=l?l.toFixed(2):0,u[s][c]=l}}return BROWSER_DATA={versions:t,usage:u}}function parseSupportData(){function e(e,t){a[e][t]=FEATURE.stats[e][BROWSER_DATA.versions[e][t]]}function t(e,t){if(BROWSER_DATA.versions[e][t]){var n=FEATURE.support[MDN_BROWSERS_KEY[e]];if(!n)return void(a[e][t]="u");var r=n.version_added,s=BROWSER_DATA.versions[e][t],o=parseFloat(s)>=parseFloat(r);"TP"===s&&r>0&&(o=!0),a[e][t]=o?"y":"n"}}for(var a={},n=0;n<BROWSERS.length;n++){var r=BROWSERS[n];a[r]={};for(var s=0;s<OPTIONS.periods.length;s++){var o=OPTIONS.periods[s];switch(OPTIONS.dataSource){case"mdn":t(r,o);break;case"caniuse":e(r,o)}}}return a}function displayLoadingMessage(){var e;e=OPTIONS.featureID?OPTIONS.imageBase?'<picture><source type="image/webp" srcset="'+OPTIONS.imageBase+'.webp"><source type="image/png" srcset="'+OPTIONS.imageBase+'.png"><source type="image/jpeg" srcset="'+OPTIONS.imageBase+'.jpg"><img src="'+OPTIONS.imageBase+'.png" alt="Data on support for the '+OPTIONS.featureID+' feature across the major browsers"></picture>':"Can I Use "+OPTIONS.featureID+"? Data on support for the "+OPTIONS.featureID+" feature across the major browsers. (Embed Loading)":"No feature ID was specified",document.getElementById("defaultMessage").innerHTML=e}function displayFeatureInformation(){if(document.getElementById("featureTitle").textContent=FEATURE.title,document.getElementById("featureLink").href=FEATURE.url,FEATURE.description){var e=FEATURE.description;e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/&lt;code&gt;/g,""),e=e.replace(/&lt;\/code&gt;/g,""),document.getElementById("featureDescription").innerHTML=e}if(FEATURE.usage_perc_y){var t=FEATURE.usage_perc_y,a=FEATURE.usage_perc_a,n=t+a;n=n.toFixed(2),document.getElementById("note").innerHTML='Global: <span class="y">'+t+'%</span> + <span class="a">'+a+"%</span> = "+n+"%"}else FEATURE.status&&(FEATURE.status.experimental&&(document.getElementById("note").innerHTML="<strong>Experimental</strong> feature"),FEATURE.status.deprecated&&(document.getElementById("note").innerHTML="<strong>Deprecated</strong> feature"));if(OPTIONS.accessibleColours&&document.body.classList.add("accessible-colours"),OPTIONS.screenshot){document.body.classList.add("screenshot");var r=new Date,s=["January","February","March","April","May","June","July","August","September","October","November","December"];document.getElementById("footer-right").innerHTML=r.getDate()+" "+s[r.getMonth()]+" "+r.getFullYear(),document.querySelector(".icon-external-link").setAttribute("hidden","true")}else document.getElementById("accessibleColoursToggle").addEventListener("click",function(){document.body.classList.toggle("accessible-colours")});switch(OPTIONS.dataSource){case"mdn":document.getElementById("footer-left").innerHTML='Data from <a href="https://github.com/mdn/browser-compat-data">mozilla.org</a> | Embed from <a href="https://caniuse.bitsofco.de">caniuse.bitsofco.de</a>';break;case"caniuse":document.getElementById("footer-left").innerHTML='Data from <a href="https://caniuse.com">caniuse.com</a> | Embed from <a href="https://caniuse.bitsofco.de">caniuse.bitsofco.de</a>'}document.body.classList.add(OPTIONS.dataSource)}function displayTable(e){for(var t=OPTIONS.periods.length-1;t>-1;t--){for(var a="",n=0;n<BROWSERS.length;n++)a+='<td class="'+BROWSERS[n]+'"></td>';var r=document.createElement("tr");r.className="statistics "+OPTIONS.periods[t],r.innerHTML=a,document.getElementById("tableBody").appendChild(r)}for(var s=!1,o=!1,i=!1,t=0;t<BROWSERS.length;t++)for(var c=BROWSERS[t],u=0;u<OPTIONS.periods.length;u++){for(var d,l=OPTIONS.periods[u],r=document.getElementsByClassName(l)[0],f=r.childNodes,p=0;p<f.length;p++)f[p].className.indexOf(c)>-1&&(d=f[p]);void 0!=e[c][l]&&(d.className+=" "+e[c][l]);var m=getShortenedBrowserVersion(BROWSER_DATA.versions[c][l]),g="<span>"+m+'</span><span class="usage">'+BROWSER_DATA.usage[c][l]+"%</span>";void 0!=BROWSER_DATA.versions[c][l]?d.innerHTML=g:d.innerHTML="<span></span>",void 0!=e[c][l]&&e[c][l].indexOf("x")>-1&&(s=!0),void 0!=e[c][l]&&e[c][l].indexOf("u")>-1&&(o=!0),void 0!=e[c][l]&&e[c][l].indexOf("d")>-1&&(i=!0)}document.getElementById("legendX").style.display=s?"inline-block":"none",document.getElementById("legendU").style.display=o?"inline-block":"none",document.getElementById("legendD").style.display=i?"inline-block":"none"}function postDocumentHeight(){var e=document.getElementsByClassName("feature")[0].scrollHeight,t="ciu_embed:"+OPTIONS.featureID+":"+e;parent.postMessage(t,"*"),window.onresize=function(t){e=document.getElementsByClassName("feature")[0].scrollHeight;var a="ciu_embed:"+OPTIONS.featureID+":"+e;parent.postMessage(a,"*")}}var OPTIONS,BROWSER_DATA,FEATURE,caniuseDataUrl="https://raw.githubusercontent.com/Fyrd/caniuse/master/fulldata-json/data-2.0.json",mdnDataUrlBse="https://raw.githubusercontent.com/mdn/browser-compat-data/master/",embedAPI="https://api.caniuse.bitsofco.de",BROWSERS=["ie","edge","firefox","chrome","safari","ios_saf","op_mini","and_chr","android","samsung"],MDN_BROWSERS_KEY={ie:"ie",edge:"edge",firefox:"firefox",chrome:"chrome",safari:"safari",ios_saf:"safari_ios",op_mini:"op_mini",and_chr:"chrome_android",android:"android",samsung:"samsunginternet_android"};!function(){setGlobalOptions(),displayLoadingMessage(),getFeature().then(function(){return parseSupportData()}).then(function(e){displayFeatureInformation(),displayTable(e),document.getElementById("defaultMessage").style.display="none",document.getElementsByClassName("feature")[0].style.display="block",postDocumentHeight()}).catch(function(e){document.getElementById("defaultMessage").innerHTML="Feature not found...",console.error(e)})}();