function getShortenedBrowserVersion(e){return e&&e.indexOf("-")>-1&&(e=e.split("-")[1]),e}function loadJSON(e,t,s){var a=new XMLHttpRequest;a.onreadystatechange=function(){a.readyState===XMLHttpRequest.DONE&&(200===a.status?t&&t(JSON.parse(a.responseText)):s&&s(a))},a.open("GET",e,!0),a.send()}var caniuseDataUrl="https://raw.githubusercontent.com/Fyrd/caniuse/master/fulldata-json/data-2.0.json",featureID,periods,accessibleColours,imageBase;window.location.search.split("?")[1].split("&").forEach(function(e){var t=e.split("=")[0],s=e.split("=")[1];switch(t){case"feat":featureID=s;break;case"periods":periods=s.split(",");break;case"accessible-colours":accessibleColours=s;break;case"image-base":"none"!==s&&(imageBase=s)}});var browsers=["ie","edge","firefox","chrome","safari","ios_saf","op_mini","and_chr","android","samsung"],defaultMessage;defaultMessage=featureID&&periods&&imageBase?'<picture><source type="image/webp" srcset="'+imageBase+'.webp"><source type="image/png" srcset="'+imageBase+'.png"><source type="image/jpeg" srcset="'+imageBase+'.jpg"><img src="'+imageBase+'.png" alt="Data on support for the '+featureID+' feature across the major browsers from caniuse.com"></picture>':featureID&&periods?'<a href="http://caniuse.com/#feat='+featureID+'">Can I Use '+featureID+"?</a> Data on support for the "+featureID+" feature across the major browsers from caniuse.com. (Embed Loading)":"Error: Feature and/or Periods not Specified",document.getElementById("defaultMessage").innerHTML=defaultMessage;for(var i=periods.length-1;i>-1;i--){for(var tableCells="",j=0;j<browsers.length;j++)tableCells+='<td class="'+browsers[j]+'"></td>';var row=document.createElement("tr");row.className="statistics "+periods[i],row.innerHTML=tableCells,document.getElementById("tableBody").appendChild(row)}loadJSON(caniuseDataUrl,function(e){var t=e.data[featureID];if(t){var s=t.usage_perc_y,a=t.usage_perc_a,r=s+a,r=r.toFixed(2),o=t.description;o=o.replace(/</g,"&lt;"),o=o.replace(/>/g,"&gt;"),document.getElementById("featureTitle").innerHTML=t.title,document.getElementById("featureDescription").innerHTML=o,document.getElementById("featureLink").href="http://caniuse.com/#feat="+featureID,document.getElementById("note").innerHTML='Global: <span class="y">'+s+'%</span> + <span class="a">'+a+"%</span> = "+r+"%";for(var i={},l=0;l<browsers.length;l++){for(var d,c=browsers[l],u=e.agents[c].current_version,g=0;g<e.agents[c].version_list.length;g++)if(0===e.agents[c].version_list[g].era){d=g;break}d=parseInt(d),i[c]={};for(var g=0;g<periods.length;g++){var f=periods[g];"current"===f?i[c][f]=u:f.indexOf("past")>-1?(n=parseInt(f.split("_")[1]),i[c][f]=e.agents[c].version_list[d-n]?e.agents[c].version_list[d-n].version:null):f.indexOf("future")>-1&&(n=parseInt(f.split("_")[1]),i[c][f]=e.agents[c].version_list[d+n]?e.agents[c].version_list[d+n].version:null)}}for(var m={},l=0;l<browsers.length;l++){var c=browsers[l];m[c]={};for(var g=0;g<periods.length;g++){var f=periods[g],p=i[c][f],b=e.agents[c].usage_global[p],b=b?b.toFixed(2):0;m[c][f]=b}}for(var v={},l=0;l<browsers.length;l++){var c=browsers[l];v[c]={};for(var g=0;g<periods.length;g++){var f=periods[g];v[c][f]=t.stats[c][i[c][f]]}}for(var h=!1,y=!1,w=!1,l=0;l<browsers.length;l++)for(var c=browsers[l],g=0;g<periods.length;g++){for(var E,f=periods[g],I=document.getElementsByClassName(f)[0],B=I.childNodes,M=0;M<B.length;M++)B[M].className.indexOf(c)>-1&&(E=B[M]);void 0!=v[c][f]&&(E.className+=" "+v[c][f]);var L=getShortenedBrowserVersion(i[c][f]),D="<span>"+L+'</span><span class="usage">'+m[c][f]+"%</span>";void 0!=i[c][f]?E.innerHTML=D:E.innerHTML="<span></span>",void 0!=v[c][f]&&v[c][f].indexOf("x")>-1&&(h=!0),void 0!=v[c][f]&&v[c][f].indexOf("u")>-1&&(y=!0),void 0!=v[c][f]&&v[c][f].indexOf("d")>-1&&(w=!0)}document.getElementById("legendX").style.display=h?"inline-block":"none",document.getElementById("legendU").style.display=y?"inline-block":"none",document.getElementById("legendD").style.display=w?"inline-block":"none"}else document.getElementById("featureTitle").innerHTML="Uh Oh!",document.getElementById("featureDescription").innerHTML="The feature <strong>'"+featureID+"'</strong> was not recognized. ",document.getElementById("featureMain").innerHTML="";document.getElementById("defaultMessage").style.display="none",document.getElementsByClassName("feature")[0].style.display="block";var _=document.getElementsByClassName("feature")[0].scrollHeight,T="ciu_embed:"+featureID+":"+_;parent.postMessage(T,"*"),window.onresize=function(e){_=document.getElementsByClassName("feature")[0].scrollHeight;var t="ciu_embed:"+featureID+":"+_;parent.postMessage(t,"*")}},function(e){document.getElementById("defaultMessage").innerHTML="Error Getting JSON File: "+e.response,console.error(e)}),"true"==accessibleColours&&document.body.classList.add("accessible-colours"),document.getElementById("accessibleColoursToggle").addEventListener("click",function(){document.body.classList.toggle("accessible-colours")});